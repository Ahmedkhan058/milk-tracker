
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Milk Tracker</title>

  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet"/>

  <style>
    body { background:#f4f6f9; }

    .navbar { background:#007bff; }
    .navbar-brand { color:#fff !important; font-weight:600; }

    .calendar {
      display:grid;
      grid-template-columns:repeat(7,1fr);
      gap:8px;
    }

    .day-name {
      text-align:center;
      font-weight:600;
      color:#6c757d;
    }

    .day {
      background:#fff;
      border-radius:8px;
      min-height:80px;
      padding:8px;
      text-align:center;
      cursor:pointer;
      box-shadow:0 1px 4px rgba(0,0,0,0.1);
      display:flex;
      flex-direction:column;
      justify-content:center;
    }

    .today { border:2px solid #007bff; }
    .taken { background:#d4edda; }
    .not-taken { background:#f8d7da; }
    .empty { background:transparent; box-shadow:none; cursor:default; }

    @media (max-width:576px) {
      .day { min-height:65px; padding:6px; }
    }
  </style>
</head>
<body>

<nav class="navbar">
  <span class="navbar-brand">ðŸ¥› Milk Tracker</span>
</nav>

<div class="container mt-4">

  <!-- Month Navigation -->
  <div class="d-flex justify-content-between align-items-center mb-3">
    <button class="btn btn-outline-primary btn-sm" onclick="changeMonth(-1)">â—€ Prev</button>
    <h5 id="monthTitle" class="mb-0 font-weight-bold"></h5>
    <button class="btn btn-outline-primary btn-sm" onclick="changeMonth(1)">Next â–¶</button>
  </div>

  <!-- Weekdays -->
  <div class="calendar mb-2">
    <div class="day-name">Sun</div>
    <div class="day-name">Mon</div>
    <div class="day-name">Tue</div>
    <div class="day-name">Wed</div>
    <div class="day-name">Thu</div>
    <div class="day-name">Fri</div>
    <div class="day-name">Sat</div>
  </div>

  <!-- Calendar -->
  <div id="calendar" class="calendar"></div>
</div>

<script>
  let currentDate = new Date();

  function formatDate(date) {
    return date.toISOString().split("T")[0];
  }

  function loadMilkData() {
    return JSON.parse(localStorage.getItem("milkTracker")) || {};
  }

  function saveMilkData(data) {
    localStorage.setItem("milkTracker", JSON.stringify(data));
  }

  function renderCalendar() {
    const calendar = document.getElementById("calendar");
    const title = document.getElementById("monthTitle");
    calendar.innerHTML = "";

    const year = currentDate.getFullYear();
    const month = currentDate.getMonth();

    title.textContent = currentDate.toLocaleString("default", {
      month: "long",
      year: "numeric"
    });

    const firstDay = new Date(year, month, 1).getDay();
    const daysInMonth = new Date(year, month + 1, 0).getDate();
    const milkData = loadMilkData();
    const todayStr = formatDate(new Date());

    // Empty slots before 1st
    for (let i = 0; i < firstDay; i++) {
      const empty = document.createElement("div");
      empty.className = "day empty";
      calendar.appendChild(empty);
    }

    // Days of month
    for (let day = 1; day <= daysInMonth; day++) {
      const date = new Date(year, month, day);
      const dateStr = formatDate(date);
      const div = document.createElement("div");
      div.className = "day";

      if (milkData[dateStr] === "yes") div.classList.add("taken");
      if (milkData[dateStr] === "no") div.classList.add("not-taken");
      if (dateStr === todayStr) div.classList.add("today");

      div.innerHTML = `<strong>${day}</strong>`;

      div.onclick = () => {
        milkData[dateStr] = milkData[dateStr] === "yes" ? "no" : "yes";
        saveMilkData(milkData);
        renderCalendar();
      };

      calendar.appendChild(div);
    }
  }

  function changeMonth(step) {
    currentDate.setMonth(currentDate.getMonth() + step);
    renderCalendar();
  }

  renderCalendar();
</script>

</body>
</html>
